<!DOCTYPE html>
<html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
</head>

<body>
  <!-- TODO: Make this page pretty -->
  <h1>DevRel Repo Statistics</h1>

  <input type="submit" value='click me' id="takeAction" />
  <p id="results"></p>


</body>

<script src="https://unpkg.com/realm-web@0.8.0/dist/bundle.iife.js"></script>
<!-- <script src="./config.js"></script>-->
<script>
    const REALM_APP_ID='drgh-hfxea';
  const app = new Realm.App({ id: REALM_APP_ID });

  document.getElementById('takeAction').addEventListener('click', async event => {
    document.getElementById('results').innerText = 'Processing...'

    try {

      // TODO: use Google auth
      await app.logIn(Realm.Credentials.anonymous());
      const result = await app.functions.requestUserRepos('mongodb-developer');

      // TODO: loop through each repo
      // "name" is the repo name - "stargazers_count" is the # of stars
      // call getClones
      console.log(result);

    } catch (error) {
      console.error(error);
      document.getElementById('results').innerText = "An error occurred while trying to process your file. Please try again.";
    }

  })
</script>

</html>